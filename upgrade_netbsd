#!/bin/sh

# exit on error (but beware of functions called from if statements)
# or on unset (but used) variable
set -eu

echo Did you check that /usr/src and /usr/xsrc are on the branch you want? \(cvs update -r \<netbsd-6\>\)
echo
echo Did you check that /etc/sysbuild/default.conf is configured the way you want?
echo
echo \(you have 10 seconds to interrupt this script, if not\)
echo
echo \(Note that building will take about 6.5 hours\)
echo

sleep 10

mkdir /sysbuild
sysbuild -o BUILD_ROOT=/sysbuild build
sysupgrde auto /sysbuild/release/$(uname -m)
rm -r /sysbuild

rm /usr/pkgsrc/packages/All/*

shutdown -r now
